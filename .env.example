# ========= Runtime =========
NODE_ENV=development
LOG_LEVEL=info
HEALTH_HOST=127.0.0.1
HEALTH_PORT=0

# ========= Archestra Core =========
ARCHESTRA_ENABLE=1
ARCHESTRA_PROVIDER=gemini
ARCHESTRA_PROFILE_ID=
ARCHESTRA_AGENT_ID=personal-memory-gateway

ARCHESTRA_GEMINI_BASE_URL=http://localhost:9000/v1/gemini
ARCHESTRA_GEMINI_API_KEY=
ARCHESTRA_MODEL=gemini-2.5-flash

ARCHESTRA_GROUNDING_MODE=excerpt
ARCHESTRA_EXTRACTIVE_MODE=0

# ========= Embeddings =========
# Supported:
# EMBEDDING_PROVIDER=local | gemini | openai | chatgpt | claude
EMBEDDING_PROVIDER=local
EMBEDDING_MODEL=local-hash-768
MEMORY_VECTOR_DIM=768

# OpenAI-compatible route (required when EMBEDDING_PROVIDER=openai/chatgpt/claude)
ARCHESTRA_BASE_URL=http://localhost:9000/v1/openai
ARCHESTRA_API_KEY=

# Optional dedicated embedding config
# ARCHESTRA_EMBEDDING_BASE_URL=http://localhost:9000/v1/openai
# ARCHESTRA_EMBEDDING_API_KEY=
# ARCHESTRA_EMBEDDING_MODEL=text-embedding-3-small
#
# ARCHESTRA_EMBEDDING_GEMINI_BASE_URL=http://localhost:9000/v1/gemini
# ARCHESTRA_EMBEDDING_GEMINI_API_KEY=

# ========= Ingestion =========
INGEST_DIR=my_data
CHUNK_SIZE=500
INGEST_DISABLE=0
INGEST_DEBUG=0
OCR_LANGUAGE=eng
INGEST_MANIFEST_PATH=data/ingestion-manifest.json

# ========= Memory =========
LANCE_DB_PATH=data/lancedb
LANCE_TABLE_NAME=personal_memory
# MEMORY_QUERY_SCOPE:
# - hybrid (default): search documents + saved user facts
# - facts_only: search only save_memory facts (recommended for non-RAG behavior)
# - documents_only: search only ingested document chunks
MEMORY_QUERY_SCOPE=hybrid
# Strict lexical guard:
# - 1 (default): if query keywords do not match text, return NO_CONTEXT_FOUND
# - 0: allow semantic-only matches
MEMORY_STRICT_QUERY_MATCH=1
# Performance tuning for interactive chat
MEMORY_RETRIEVAL_TOP_K=3
MEMORY_RESULT_MAX_CHARS=320

# ========= MCP =========
MCP_DEBUG=0
# Set to 0 when running as HTTP bridge for Archestra-only deployment
MCP_STDIO_ENABLE=1
MCP_HTTP_ENABLE=1
MCP_HTTP_HOST=0.0.0.0
MCP_HTTP_PORT=8787

# ========= Dashboard telemetry (SSE + stats) =========
DASHBOARD_ENABLE=0
DASHBOARD_PORT=8787
DASHBOARD_ALLOW_ORIGINAL=0
DASHBOARD_EVENT_BUFFER=200
DASHBOARD_STATS_PATH=data/dashboard-stats.json
# Optional upload API controls for dashboard file ingestion
DASHBOARD_UPLOAD_MAX_BYTES=10485760
# If set, upload requests must send this token via x-dashboard-token header
DASHBOARD_UPLOAD_TOKEN=

# ========= Consent hook (high-risk gate) =========
CONSENT_HOOK_ENABLE=1
CONSENT_TTL_MS=300000

# ========= Provider Switch Examples =========
# Gemini:
# ARCHESTRA_PROVIDER=gemini
# ARCHESTRA_MODEL=gemini-2.5-flash
# EMBEDDING_PROVIDER=gemini
# EMBEDDING_MODEL=text-embedding-004
#
# ChatGPT / OpenAI:
# ARCHESTRA_PROVIDER=chatgpt
# ARCHESTRA_MODEL=gpt-4o-mini
# ARCHESTRA_BASE_URL=http://localhost:9000/v1/openai
# ARCHESTRA_API_KEY=archestra_xxx
# EMBEDDING_PROVIDER=openai
# EMBEDDING_MODEL=text-embedding-3-small
#
# Claude (via OpenAI-compatible route):
# ARCHESTRA_PROVIDER=claude
# ARCHESTRA_MODEL=claude-3-5-sonnet-20241022
# ARCHESTRA_BASE_URL=http://localhost:9000/v1/openai
# ARCHESTRA_API_KEY=archestra_xxx
# EMBEDDING_PROVIDER=openai
